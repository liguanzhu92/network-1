README

Network Topology


           1Mb/s, 10ms       1Mb/s, 10ms       1Mb/s, 10ms
       A-----------------B-----------------C-----------------D


 - Tracing of queues and packet receptions to file 
   "tcp-large-transfer.tr"
 - pcap traces also generated in the following files
   "tcp-large-transfer-$n-$i.pcap" where n and i represent node and interface
 numbers respectively
 Usage (e.g.): ./waf --run tcp-large-transfer



File  Location:
	NS3_root/scratch/tcp_transfer.cc

Run:
 	NS3_root/waf --run "tcp_transfer"

Transimission Infor:
	tcp-large-transfer.tr
	/usr/sbin/tcpdump -nn -tt -v -K -r  tcp-large-transfer-0-0.pcap
	/usr/sbin/tcpdump -nn -tt -v -K -r  tcp-large-transfer-1-0.pcap
	/usr/sbin/tcpdump -nn -tt -v -K -r  tcp-large-transfer-1-1.pcap
	/usr/sbin/tcpdump -nn -tt -v -K -r  tcp-large-transfer-2-1.pcap
	/usr/sbin/tcpdump -nn -tt -v -K -r  tcp-large-transfer-3-0.pcap
	/usr/sbin/tcpdump -nn -tt -v -K -r  tcp-large-transfer-2-0.pcap


Graph:
	Plot the transmitted sequence number vs. time
		S1: export the transimission Infor at server
			/usr/sbin/tcpdump -nn -tt -r  tcp-large-transfer-0-0.pcap | awk _F'[:\t]*' "{if($8 == "seq" && $3== "10.1.1.1.49153")print($1," ",$9)}' > seq_num
		S2: find the retransmit sequence number
			compile the code
			javac FindDuplicates.java
			then, put tranfer to the same folder of java class file and run the java program.
			java FindDuplicates > seq_num_retransmit
		S3: Plot the Sequence VS time graph
			set term png
			set output "1.png"
			plot "seq_num" with linespoints, "seq_num_retransmit" with points

	Plot cwnd vs. time
		S1: save the log information
			./waf --run "tcp-transfer -v" > log_info 2>&1
		S2: 
			cat log_info | grep Slow Starts | awk _F'[:\t]*' 'print($1,"",$13)}' > SlowCwndChange.cwnd
		S3: Plot cwnd vs. time graph
			set term png
			set output "2.png"
			plot "CwndChange.cwnd" with linespoints, "SlowCwndChange.cwnd" with points
	Plot TCPFixed and TCPNewReno
		S1: comment out line 58 in tcp_transfer.cc
		S2: copy "tcp-fixed.h" "tcp-fixed.cc" to NS3_root/src/internet/model
		S3: replace 'model/tcp-newreno.cc' with 'model/tcp-fixed.cc',
		    replace 'model/tcp-newreno.h' with 'model/tcp-fixed.h' in NS3_root/src/internet/model/wscript
		S4: re-run the file
			NS3_root/waf --run "tcp_transfer"
		S5: export the transimission Infor at server
			/usr/sbin/tcpdump -nn -tt -r  tcp-large-transfer-0-0.pcap | awk _F'[:\t]*' "{if($8 == "seq" && $3 == "10.1.1.1.49153")print($1," ",$9)}' > fixed_seq_num
		S6: Plot the TCPFixed VS TCPNewReno
			set term png
			set output "3.png"
			plot "seq_num" with linespoints, "fixed_seq_num" with linespoints
